# Migration `20201018113817-create-data`

This migration has been generated by andrey at 10/18/2020, 1:38:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text   NOT NULL ,
"password" text   NOT NULL ,
"displayName" text   ,
"userName" text   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Product" (
"id" SERIAL,
"name" text   NOT NULL ,
"description" text   ,
"price" integer   NOT NULL ,
"deleted" boolean   NOT NULL DEFAULT false,
"deletedAt" timestamp(3)   ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."Order" (
"id" SERIAL,
"userId" integer   NOT NULL ,
"total" integer   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE TABLE "public"."OrderLineItem" (
"id" SERIAL,
"orderId" integer   NOT NULL ,
"productId" integer   NOT NULL ,
"productPrice" integer   NOT NULL ,
"productName" text   NOT NULL ,
"quantity" Decimal(65,30)   NOT NULL ,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")

ALTER TABLE "public"."Order" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."OrderLineItem" ADD FOREIGN KEY ("orderId")REFERENCES "public"."Order"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."OrderLineItem" ADD FOREIGN KEY ("productId")REFERENCES "public"."Product"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20201018113817-create-data
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,51 @@
+datasource DS {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider      = "prisma-client-js"
+  binaryTargets = "native"
+}
+
+model User {
+  id          Int      @id @default(autoincrement())
+  email       String   @unique
+  password    String
+  displayName String?
+  userName    String?
+  createdAt   DateTime @default(now())
+  Order       Order[]
+}
+
+model Product {
+  id            Int             @id @default(autoincrement())
+  name          String
+  description   String?
+  price         Int
+  deleted       Boolean         @default(false)
+  deletedAt     DateTime?
+  createdAt     DateTime        @default(now())
+  OrderLineItem OrderLineItem[]
+}
+
+model Order {
+  id            Int             @id @default(autoincrement())
+  user          User            @relation(fields: [userId], references: [id])
+  userId        Int
+  total         Int
+  createdAt     DateTime        @default(now())
+  OrderLineItem OrderLineItem[]
+}
+
+model OrderLineItem {
+  id           Int      @id @default(autoincrement())
+  order        Order    @relation(fields: [orderId], references: [id])
+  orderId      Int
+  product      Product  @relation(fields: [productId], references: [id])
+  productId    Int
+  productPrice Int
+  productName  String
+  quantity     Float
+  createdAt    DateTime @default(now())
+}
```


